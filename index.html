<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#6D28D9">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <title>‚õ∞Ô∏è AtacamApp - Geolog√≠a Inteligente</title>
    <link rel="manifest" href="data:application/manifest+json,{}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        /* === PALETA DE COLORES VIBRANTE === */
        :root {
            --primary: #6D28D9;       /* P√∫rpura vibrante */
            --secondary: #10B981;     /* Verde esmeralda */
            --accent: #F59E0B;        /* √Åmbar dorado */
            --accent2: #3B82F6;       /* Azul cielo */
            --accent3: #EC4899;       /* Rosa magenta */
            --light: #F8FAFC;         /* Blanco suave */
            --dark: #1F2937;          /* Gris oscuro */
            --rock: #92400E;          /* Color roca */
            --mineral: #DC2626;       /* Rojo mineral */
            --water: #06B6D4;         /* Azul agua */
            --earth: #D97706;         /* Marr√≥n tierra */
            --success: #10B981;
            --warning: #F59E0B;
            --danger: #EF4444;
            --gradient-primary: linear-gradient(135deg, #6D28D9 0%, #8B5CF6 100%);
            --gradient-secondary: linear-gradient(135deg, #10B981 0%, #34D399 100%);
            --gradient-accent: linear-gradient(135deg, #F59E0B 0%, #FBBF24 100%);
            --gradient-geo: linear-gradient(135deg, #92400E 0%, #D97706 100%);
            --shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        /* === RESET Y CONFIGURACI√ìN GENERAL === */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        body {
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: var(--dark);
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        /* === ANIMACIONES === */
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(5deg); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
        }

        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 20px rgba(109, 40, 217, 0.3); }
            50% { box-shadow: 0 0 30px rgba(109, 40, 217, 0.6); }
        }

        /* === PANTALLA DE INICIO === */
        .splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .splash-content {
            text-align: center;
            animation: slideIn 0.8s ease;
        }

        .splash-icon {
            font-size: 5rem;
            color: white;
            margin-bottom: 20px;
            animation: float 3s ease-in-out infinite;
            text-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .splash-title {
            font-size: 2.8rem;
            font-weight: 800;
            color: white;
            margin-bottom: 10px;
            text-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .splash-subtitle {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 30px;
            max-width: 300px;
        }

        .progress-container {
            width: 80%;
            max-width: 300px;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
            margin-top: 30px;
        }

        .progress-bar {
            height: 100%;
            background: var(--accent);
            width: 0%;
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        /* === APLICACI√ìN PRINCIPAL === */
        .app-container {
            display: none;
            min-height: 100vh;
            background: var(--light);
            position: relative;
            overflow: hidden;
        }

        /* Efecto de fondo decorativo */
        .app-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(109, 40, 217, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(245, 158, 11, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(16, 185, 129, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        /* === HEADER VIBRANTE === */
        .app-header {
            background: var(--gradient-primary);
            color: white;
            padding: 20px 15px 10px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow);
            border-bottom-left-radius: 25px;
            border-bottom-right-radius: 25px;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .app-brand {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .brand-icon {
            font-size: 2rem;
            animation: float 4s ease-in-out infinite;
        }

        .brand-text h1 {
            font-size: 1.5rem;
            font-weight: 800;
        }

        .brand-text span {
            color: var(--accent);
        }

        .header-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .action-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        /* === NAVEGACI√ìN PRINCIPAL === */
        .main-nav {
            display: flex;
            overflow-x: auto;
            gap: 10px;
            padding: 10px 0;
            margin-bottom: 10px;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .main-nav::-webkit-scrollbar {
            display: none;
        }

        .nav-item {
            flex: 0 0 auto;
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.15);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            color: white;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .nav-item.active {
            background: rgba(255, 255, 255, 0.3);
            border-color: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(245, 158, 11, 0.3);
        }

        .nav-item:hover:not(.active) {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-1px);
        }

        /* === PANEL DE ESTADO === */
        .status-panel {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .status-card {
            text-align: center;
            padding: 10px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.2);
            transition: transform 0.3s ease;
        }

        .status-card:hover {
            transform: translateY(-3px);
        }

        .status-icon {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .status-label {
            font-size: 0.7rem;
            opacity: 0.9;
        }

        .status-value {
            font-size: 0.9rem;
            font-weight: 700;
        }

        /* === CONTENIDO PRINCIPAL === */
        .main-content {
            padding: 20px 15px 100px;
            animation: slideIn 0.5s ease;
        }

        .section-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.4rem;
            color: var(--primary);
            margin-bottom: 20px;
            padding-left: 10px;
        }

        .section-title i {
            color: var(--accent);
            font-size: 1.6rem;
        }

        /* === TARJETAS MODERNAS === */
        .card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
            border: 2px solid rgba(109, 40, 217, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: var(--gradient-primary);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* === LEYENDA GEOL√ìGICA MEJORADA === */
        .legend-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: linear-gradient(135deg, #F8FAFC 0%, #F1F5F9 100%);
            border-radius: 15px;
            border: 2px solid rgba(109, 40, 217, 0.1);
            transition: all 0.3s ease;
        }

        .legend-item:hover {
            transform: translateX(5px);
            border-color: var(--primary);
        }

        .legend-color {
            width: 25px;
            height: 25px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .legend-info h4 {
            font-size: 1rem;
            color: var(--dark);
            margin-bottom: 5px;
        }

        .legend-info p {
            font-size: 0.85rem;
            color: #64748B;
        }

        /* === PAR√ÅMETROS ESTRUCTURALES === */
        .params-display {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 20px;
        }

        .param-card {
            background: var(--gradient-geo);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .param-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 100%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: rotate(45deg);
        }

        .param-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
            opacity: 0.9;
        }

        .param-value {
            font-size: 2.2rem;
            font-weight: 800;
            margin: 10px 0;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .param-label {
            font-size: 1rem;
            opacity: 0.9;
            font-weight: 600;
        }

        /* === M√ìDULO DE C√ÅMARA === */
        .camera-module {
            position: relative;
        }

        .camera-preview {
            width: 100%;
            height: 300px;
            background: #1F2937;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            margin-bottom: 20px;
            border: 3px solid var(--primary);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        #cameraFeed {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .camera-overlay {
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
            font-size: 0.9rem;
            z-index: 10;
        }

        .camera-controls {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-top: 20px;
        }

        /* === MAPA INTERACTIVO === */
        .map-container {
            width: 100%;
            height: 300px;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 20px;
            border: 3px solid var(--primary);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        #map {
            width: 100%;
            height: 100%;
        }

        /* === AN√ÅLISIS IA === */
        .ai-analysis {
            background: linear-gradient(135deg, #F0F9FF 0%, #E0F2FE 100%);
            border: 2px solid var(--accent2);
        }

        .ai-result {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-top: 15px;
            border-left: 4px solid var(--accent2);
            animation: slideIn 0.5s ease;
        }

        .ai-confidence {
            display: inline-block;
            padding: 5px 15px;
            background: var(--gradient-secondary);
            color: white;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 15px;
        }

        /* === BOTONES MEJORADOS === */
        .btn {
            padding: 15px 25px;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: white;
        }

        .btn-secondary {
            background: var(--gradient-secondary);
            color: white;
        }

        .btn-accent {
            background: var(--gradient-accent);
            color: var(--dark);
        }

        .btn-danger {
            background: linear-gradient(135deg, #EF4444 0%, #DC2626 100%);
            color: white;
        }

        .btn-sm {
            padding: 10px 15px;
            font-size: 0.9rem;
        }

        .btn-icon {
            width: 50px;
            height: 50px;
            padding: 0;
            border-radius: 12px;
            font-size: 1.2rem;
        }

        /* === NAVEGACI√ìN INFERIOR === */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 15px;
            display: flex;
            justify-content: space-around;
            z-index: 100;
            box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.1);
            border-top-left-radius: 25px;
            border-top-right-radius: 25px;
        }

        .nav-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            padding: 10px 15px;
            border-radius: 15px;
            color: #64748B;
            text-decoration: none;
            transition: all 0.3s ease;
            min-width: 70px;
        }

        .nav-btn.active {
            background: var(--gradient-primary);
            color: white;
            transform: translateY(-10px);
            box-shadow: 0 10px 20px rgba(109, 40, 217, 0.3);
        }

        .nav-btn i {
            font-size: 1.5rem;
        }

        .nav-label {
            font-size: 0.8rem;
            font-weight: 600;
        }

        /* === MODAL MEJORADO === */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
            backdrop-filter: blur(10px);
        }

        .modal.active {
            display: flex;
            animation: slideIn 0.3s ease;
        }

        .modal-content {
            background: white;
            border-radius: 25px;
            width: 100%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            border: 2px solid var(--primary);
            position: relative;
        }

        .modal-header {
            padding: 25px;
            background: var(--gradient-primary);
            color: white;
            border-top-left-radius: 23px;
            border-top-right-radius: 23px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-body {
            padding: 25px;
        }

        .modal-image {
            width: 100%;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        /* === NOTIFICACIONES === */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 20px 25px;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            z-index: 1001;
            display: flex;
            align-items: center;
            gap: 15px;
            animation: slideIn 0.5s ease;
            border-left: 5px solid var(--primary);
            max-width: 350px;
            transform: translateX(0);
        }

        .notification.hiding {
            animation: slideIn 0.5s ease reverse forwards;
        }

        .notification-icon {
            font-size: 1.5rem;
            color: var(--primary);
        }

        .notification.success {
            border-left-color: var(--success);
        }

        .notification.success .notification-icon {
            color: var(--success);
        }

        .notification.error {
            border-left-color: var(--danger);
        }

        .notification.error .notification-icon {
            color: var(--danger);
        }

        .notification.warning {
            border-left-color: var(--warning);
        }

        .notification.warning .notification-icon {
            color: var(--warning);
        }

        /* === BADGES Y TAGS === */
        .badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge-primary {
            background: var(--gradient-primary);
            color: white;
        }

        .badge-secondary {
            background: var(--gradient-secondary);
            color: white;
        }

        .badge-accent {
            background: var(--gradient-accent);
            color: var(--dark);
        }

        /* === RESPONSIVE DESIGN === */
        @media (max-width: 768px) {
            .legend-grid {
                grid-template-columns: 1fr;
            }
            
            .params-display {
                grid-template-columns: 1fr;
            }
            
            .camera-controls {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .status-panel {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .nav-item {
                padding: 10px 15px;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .splash-title {
                font-size: 2.2rem;
            }
            
            .card {
                padding: 20px;
            }
            
            .btn {
                padding: 12px 20px;
                font-size: 0.9rem;
            }
            
            .modal-content {
                margin: 10px;
            }
        }

        /* === UTILITY CLASSES === */
        .fade-in {
            animation: slideIn 0.5s ease;
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        .float {
            animation: float 3s ease-in-out infinite;
        }

        .text-center {
            text-align: center;
        }

        .mt-10 {
            margin-top: 10px;
        }

        .mt-20 {
            margin-top: 20px;
        }

        .mb-10 {
            margin-bottom: 10px;
        }

        .mb-20 {
            margin-bottom: 20px;
        }

        /* === LOADING SPINNER === */
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(109, 40, 217, 0.2);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* === SCROLLBAR PERSONALIZADO === */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #F1F5F9;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gradient-primary);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }
    </style>
</head>
<body>
    <!-- üåü PANTALLA DE INICIO -->
    <div class="splash-screen" id="splashScreen">
        <div class="splash-content">
            <div class="splash-icon">
                <i class="fas fa-mountain"></i>
            </div>
            <h1 class="splash-title">AtacamApp</h1>
            <p class="splash-subtitle">‚ú® Geolog√≠a Inteligente en tus manos ‚ú®</p>
            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <div style="margin-top: 30px; color: rgba(255,255,255,0.8); font-size: 0.9rem;">
                <i class="fas fa-rocket"></i> Cargando herramientas geol√≥gicas...
            </div>
        </div>
    </div>

    <!-- üöÄ APLICACI√ìN PRINCIPAL -->
    <div class="app-container" id="appContainer">
        <div class="app-bg"></div>
        
        <!-- üé® HEADER VIBRANTE -->
        <header class="app-header">
            <div class="header-top">
                <div class="app-brand">
                    <div class="brand-icon">
                        <i class="fas fa-mountain"></i>
                    </div>
                    <div class="brand-text">
                        <h1>Atacam<span>App</span></h1>
                        <div style="font-size: 0.8rem; opacity: 0.9;">‚õ∞Ô∏è Geolog√≠a 3D & IA</div>
                    </div>
                </div>
                
                <div class="header-actions">
                    <button class="action-btn" id="gpsBtn" title="GPS">
                        <i class="fas fa-satellite"></i>
                    </button>
                    <button class="action-btn" id="cameraToggle" title="C√°mara">
                        <i class="fas fa-camera"></i>
                    </button>
                    <button class="action-btn" id="settingsBtn" title="Ajustes">
                        <i class="fas fa-cog"></i>
                    </button>
                </div>
            </div>

            <!-- üì± NAVEGACI√ìN PRINCIPAL -->
            <nav class="main-nav">
                <button class="nav-item active" data-page="dashboard">
                    <i class="fas fa-home"></i> Inicio
                </button>
                <button class="nav-item" data-page="camera">
                    <i class="fas fa-camera"></i> An√°lisis
                </button>
                <button class="nav-item" data-page="map">
                    <i class="fas fa-map"></i> Mapa 3D
                </button>
                <button class="nav-item" data-page="ai">
                    <i class="fas fa-robot"></i> IA Geol√≥gica
                </button>
                <button class="nav-item" data-page="data">
                    <i class="fas fa-database"></i> Datos
                </button>
                <button class="nav-item" data-page="tools">
                    <i class="fas fa-tools"></i> Herramientas
                </button>
            </nav>

            <!-- üìä PANEL DE ESTADO -->
            <div class="status-panel">
                <div class="status-card">
                    <div class="status-icon">üõ∞Ô∏è</div>
                    <div class="status-label">GPS</div>
                    <div class="status-value" id="gpsStatus">--</div>
                </div>
                <div class="status-card">
                    <div class="status-icon">üì∏</div>
                    <div class="status-label">C√°mara</div>
                    <div class="status-value" id="cameraStatus">Lista</div>
                </div>
                <div class="status-card">
                    <div class="status-icon">üó∫Ô∏è</div>
                    <div class="status-label">Ubicaci√≥n</div>
                    <div class="status-value" id="locationStatus">--</div>
                </div>
                <div class="status-card">
                    <div class="status-icon">ü§ñ</div>
                    <div class="status-label">IA</div>
                    <div class="status-value" id="aiStatus">Activa</div>
                </div>
            </div>
        </header>

        <!-- üì± CONTENIDO PRINCIPAL -->
        <main class="main-content" id="mainContent">
            <!-- üè† P√ÅGINA: INICIO -->
            <div class="page active" id="pageDashboard">
                <h2 class="section-title">
                    <i class="fas fa-compass"></i>
                    Mapeo Geol√≥gico 3D & Proyecci√≥n Estructural
                </h2>

                <!-- üé® LEYENDA GEOL√ìGICA -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-palette"></i>
                            Leyenda Geol√≥gica
                        </h3>
                        <span class="badge badge-primary">6 Elementos</span>
                    </div>
                    
                    <div class="legend-grid">
                        <div class="legend-item">
                            <div class="legend-color" style="background: var(--rock);"></div>
                            <div class="legend-info">
                                <h4>ü™® Roca Carbonatada</h4>
                                <p>Roca sedimentaria con minerales de carbonato</p>
                            </div>
                        </div>
                        
                        <div class="legend-item">
                            <div class="legend-color" style="background: var(--primary);"></div>
                            <div class="legend-info">
                                <h4>üíé Esquisto</h4>
                                <p>Roca metam√≥rfica foliada brillante</p>
                            </div>
                        </div>
                        
                        <div class="legend-item">
                            <div class="legend-color" style="background: var(--mineral);"></div>
                            <div class="legend-info">
                                <h4>‚ö° Falla Principal</h4>
                                <p>Discontinuidad tect√≥nica importante</p>
                            </div>
                        </div>
                        
                        <div class="legend-item">
                            <div class="legend-color" style="background: var(--accent);"></div>
                            <div class="legend-info">
                                <h4>‚ú® Mineralizaci√≥n</h4>
                                <p>Zona de inter√©s econ√≥mico</p>
                            </div>
                        </div>
                        
                        <div class="legend-item">
                            <div class="legend-color" style="background: var(--water);"></div>
                            <div class="legend-info">
                                <h4>üíß Acu√≠fero</h4>
                                <p>Zona de flujo h√≠drico subterr√°neo</p>
                            </div>
                        </div>
                        
                        <div class="legend-item">
                            <div class="legend-color" style="background: var(--earth);"></div>
                            <div class="legend-info">
                                <h4>üìç Par√°metros</h4>
                                <p>Mediciones estructurales</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- üìê PAR√ÅMETROS ESTRUCTURALES -->
                <div class="card">
                    <h3 class="card-title">
                        <i class="fas fa-ruler-combined"></i>
                        Par√°metros Estructurales
                    </h3>
                    
                    <div class="params-display">
                        <div class="param-card">
                            <div class="param-icon">üß≠</div>
                            <div class="param-value" id="rumboValue">N.45¬∞E</div>
                            <div class="param-label">Rumbo Comp√°s</div>
                        </div>
                        
                        <div class="param-card" style="background: var(--gradient-secondary);">
                            <div class="param-icon">üìê</div>
                            <div class="param-value" id="buzamientoValue">30¬∞SE</div>
                            <div class="param-label">Buzamiento</div>
                        </div>
                    </div>
                </div>

                <!-- üìç UBICACI√ìN ACTUAL -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-location-dot"></i>
                            Ubicaci√≥n en Tiempo Real
                        </h3>
                        <span class="badge badge-accent pulse">GPS Activo</span>
                    </div>
                    
                    <div class="gps-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                        <div class="gps-data">
                            <div class="param-label">üåé Latitud</div>
                            <div class="gps-value" id="latitudeValue">-27.3667</div>
                        </div>
                        <div class="gps-data">
                            <div class="param-label">üåç Longitud</div>
                            <div class="gps-value" id="longitudeValue">-70.3333</div>
                        </div>
                        <div class="gps-data">
                            <div class="param-label">‚õ∞Ô∏è Altitud</div>
                            <div class="gps-value" id="altitudeValue">1,200 m</div>
                        </div>
                        <div class="gps-data">
                            <div class="param-label">üéØ Precisi√≥n</div>
                            <div class="gps-value" id="accuracyValue">¬±5 m</div>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary mt-20" id="getLocationBtn" style="width: 100%;">
                        <i class="fas fa-satellite"></i> Actualizar Ubicaci√≥n GPS
                    </button>
                </div>
            </div>

            <!-- üì∏ P√ÅGINA: AN√ÅLISIS CON C√ÅMARA -->
            <div class="page" id="pageCamera">
                <h2 class="section-title">
                    <i class="fas fa-camera"></i>
                    An√°lisis Fotogeol√≥gico
                </h2>

                <!-- üé• C√ÅMARA EN VIVO -->
                <div class="card camera-module">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-video"></i>
                            C√°mara en Tiempo Real
                        </h3>
                        <span class="badge badge-secondary pulse">EN VIVO</span>
                    </div>
                    
                    <div class="camera-preview">
                        <video id="cameraFeed" autoplay playsinline></video>
                        <div class="camera-overlay">
                            <div>
                                <i class="fas fa-crosshairs"></i> Apunte a la formaci√≥n
                            </div>
                            <div id="cameraStatusText">
                                <i class="fas fa-circle" style="color: #00FF00;"></i> Activa
                            </div>
                        </div>
                        <canvas id="photoCanvas" style="display: none;"></canvas>
                    </div>
                    
                    <div class="camera-controls">
                        <button class="btn btn-secondary" id="switchCameraBtn">
                            <i class="fas fa-sync-alt"></i> Cambiar
                        </button>
                        <button class="btn btn-accent" id="captureBtn" disabled>
                            <i class="fas fa-camera-retro"></i> Capturar
                        </button>
                        <button class="btn btn-primary" id="uploadPhotoBtn">
                            <i class="fas fa-cloud-upload-alt"></i> Subir
                        </button>
                        <button class="btn btn-danger" id="stopCameraBtn" disabled>
                            <i class="fas fa-stop"></i> Detener
                        </button>
                    </div>
                </div>

                <!-- üì∏ HISTORIAL DE IM√ÅGENES -->
                <div class="card">
                    <h3 class="card-title">
                        <i class="fas fa-images"></i>
                        Muestras Capturadas
                    </h3>
                    <div id="photoHistory" style="text-align: center; padding: 30px;">
                        <i class="fas fa-images" style="font-size: 3rem; color: #CBD5E1; margin-bottom: 15px;"></i>
                        <p style="color: #64748B;">Captura im√°genes para comenzar el an√°lisis</p>
                    </div>
                </div>
            </div>

            <!-- üó∫Ô∏è P√ÅGINA: MAPA 3D -->
            <div class="page" id="pageMap">
                <h2 class="section-title">
                    <i class="fas fa-globe-americas"></i>
                    Mapa Geol√≥gico 3D
                </h2>

                <!-- üó∫Ô∏è MAPA INTERACTIVO -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-map-marked-alt"></i>
                            Mapa Interactivo
                        </h3>
                        <span class="badge badge-primary">Online</span>
                    </div>
                    
                    <div class="map-container">
                        <div id="map"></div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 20px;">
                        <button class="btn btn-primary" id="centerMapBtn">
                            <i class="fas fa-location-arrow"></i> Centrar
                        </button>
                        <button class="btn btn-secondary" id="addMarkerBtn">
                            <i class="fas fa-map-pin"></i> Marcar
                        </button>
                    </div>
                </div>

                <!-- üé® CAPAS DEL MAPA -->
                <div class="card">
                    <h3 class="card-title">
                        <i class="fas fa-layer-group"></i>
                        Capas Geol√≥gicas
                    </h3>
                    
                    <div id="mapLayers" style="display: flex; flex-direction: column; gap: 15px;">
                        <label style="display: flex; align-items: center; justify-content: space-between; padding: 15px; background: #F8FAFC; border-radius: 10px;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="width: 20px; height: 20px; background: var(--rock); border-radius: 4px;"></div>
                                <span style="font-weight: 600;">Rocas Sedimentarias</span>
                            </div>
                            <input type="checkbox" checked data-layer="geology">
                        </label>
                        
                        <label style="display: flex; align-items: center; justify-content: space-between; padding: 15px; background: #F8FAFC; border-radius: 10px;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="width: 20px; height: 20px; background: var(--mineral); border-radius: 4px;"></div>
                                <span style="font-weight: 600;">Sistema de Fallas</span>
                            </div>
                            <input type="checkbox" checked data-layer="faults">
                        </label>
                        
                        <label style="display: flex; align-items: center; justify-content: space-between; padding: 15px; background: #F8FAFC; border-radius: 10px;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="width: 20px; height: 20px; background: var(--accent); border-radius: 4px;"></div>
                                <span style="font-weight: 600;">Zonas Mineralizadas</span>
                            </div>
                            <input type="checkbox" data-layer="mineralization">
                        </label>
                    </div>
                </div>
            </div>

            <!-- ü§ñ P√ÅGINA: IA GEOL√ìGICA -->
            <div class="page" id="pageAi">
                <h2 class="section-title">
                    <i class="fas fa-brain"></i>
                    An√°lisis con IA Geol√≥gica
                </h2>

                <!-- üß† AN√ÅLISIS IA -->
                <div class="card ai-analysis">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-robot"></i>
                            IA Especializada
                        </h3>
                        <span class="badge badge-secondary">ü§ñ v2.5</span>
                    </div>
                    
                    <div class="ai-result" id="aiOutput">
                        <div class="ai-confidence">üéØ 92% Confianza</div>
                        <p id="aiResultText">
                            <strong>¬°Hola Ge√≥logo!</strong> üëã<br><br>
                            Sube una imagen o usa la c√°mara para analizar formaciones geol√≥gicas.<br>
                            Mi IA identificar√°:
                        </p>
                        <ul style="margin-top: 15px; padding-left: 20px; color: #4B5563;">
                            <li>ü™® Tipo de roca y mineralog√≠a</li>
                            <li>‚ö° Estructuras y fallas</li>
                            <li>üìê Par√°metros estructurales</li>
                            <li>‚ú® Potencial mineral√≥gico</li>
                        </ul>
                    </div>
                    
                    <button class="btn btn-primary mt-20" id="analyzePhotoBtn" style="width: 100%;" disabled>
                        <i class="fas fa-search"></i> Analizar Imagen Actual
                    </button>
                </div>

                <!-- üìä RESULTADOS DETECTADOS -->
                <div class="card">
                    <h3 class="card-title">
                        <i class="fas fa-chart-line"></i>
                        Resultados Detectados
                    </h3>
                    
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                        <div class="gps-data" style="background: linear-gradient(135deg, #FEF3C7, #FDE68A);">
                            <div class="param-label">üß≠ Rumbo</div>
                            <div class="gps-value" id="detectedRumbo">N.45¬∞E</div>
                        </div>
                        <div class="gps-data" style="background: linear-gradient(135deg, #D1FAE5, #A7F3D0);">
                            <div class="param-label">üìê Buzamiento</div>
                            <div class="gps-value" id="detectedBuzamiento">30¬∞SE</div>
                        </div>
                        <div class="gps-data" style="background: linear-gradient(135deg, #DBEAFE, #BFDBFE);">
                            <div class="param-label">ü™® Tipo de Roca</div>
                            <div class="gps-value" id="detectedRockType">Esquisto</div>
                        </div>
                        <div class="gps-data" style="background: linear-gradient(135deg, #FCE7F3, #FBCFE8);">
                            <div class="param-label">‚ö° Estructura</div>
                            <div class="gps-value" id="detectedStructure">Falla</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- üíæ P√ÅGINA: DATOS -->
            <div class="page" id="pageData">
                <h2 class="section-title">
                    <i class="fas fa-database"></i>
                    Base de Datos Geol√≥gica
                </h2>

                <!-- üîç BUSCADOR -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-search"></i>
                            Buscar Muestras
                        </h3>
                    </div>
                    
                    <div style="position: relative;">
                        <input type="text" id="searchData" placeholder="üîç Buscar por mineral, ubicaci√≥n, tipo..." 
                               style="width: 100%; padding: 15px; padding-left: 45px; border: 2px solid #E5E7EB; border-radius: 12px; font-size: 1rem;">
                        <i class="fas fa-search" style="position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: #9CA3AF;"></i>
                    </div>
                    
                    <div id="dataList" style="margin-top: 20px;">
                        <div class="data-item" style="padding: 20px; background: #F8FAFC; border-radius: 15px; margin-bottom: 10px; border-left: 4px solid var(--primary);">
                            <strong>üìã Muestra #AT-001</strong>
                            <div style="display: flex; justify-content: space-between; margin-top: 10px; color: #6B7280;">
                                <span><i class="fas fa-map-marker-alt"></i> -27.3667, -70.3333</span>
                                <span><i class="fas fa-gem"></i> Esquisto</span>
                            </div>
                        </div>
                        <div class="data-item" style="padding: 20px; background: #F8FAFC; border-radius: 15px; margin-bottom: 10px; border-left: 4px solid var(--secondary);">
                            <strong>üìã Muestra #AT-002</strong>
                            <div style="display: flex; justify-content: space-between; margin-top: 10px; color: #6B7280;">
                                <span><i class="fas fa-map-marker-alt"></i> -27.4567, -70.1233</span>
                                <span><i class="fas fa-mountain"></i> Carbonatada</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- üì§ EXPORTAR DATOS -->
                <div class="card">
                    <h3 class="card-title">
                        <i class="fas fa-download"></i>
                        Exportar Datos
                    </h3>
                    
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                        <button class="btn btn-primary" id="exportJSONBtn">
                            <i class="fas fa-file-code"></i> JSON
                        </button>
                        <button class="btn btn-secondary" id="exportCSVBtn">
                            <i class="fas fa-file-csv"></i> CSV
                        </button>
                        <button class="btn btn-accent" id="exportPDFBtn">
                            <i class="fas fa-file-pdf"></i> PDF
                        </button>
                        <button class="btn btn-danger" id="clearDataBtn">
                            <i class="fas fa-trash"></i> Limpiar
                        </button>
                    </div>
                </div>
            </div>

            <!-- üõ†Ô∏è P√ÅGINA: HERRAMIENTAS -->
            <div class="page" id="pageTools">
                <h2 class="section-title">
                    <i class="fas fa-toolbox"></i>
                    Herramientas de Campo
                </h2>

                <!-- üß∞ HERRAMIENTAS DISPONIBLES -->
                <div class="card">
                    <h3 class="card-title">
                        <i class="fas fa-tools"></i>
                        Kit de Herramientas
                    </h3>
                    
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                        <button class="btn btn-secondary tool-btn" data-tool="compass" style="flex-direction: column; height: 100px;">
                            <i class="fas fa-compass" style="font-size: 2rem;"></i>
                            <span>Br√∫jula Digital</span>
                        </button>
                        <button class="btn btn-primary tool-btn" data-tool="mohs" style="flex-direction: column; height: 100px;">
                            <i class="fas fa-gem" style="font-size: 2rem;"></i>
                            <span>Escala Mohs</span>
                        </button>
                        <button class="btn btn-accent tool-btn" data-tool="converter" style="flex-direction: column; height: 100px;">
                            <i class="fas fa-balance-scale" style="font-size: 2rem;"></i>
                            <span>Conversor</span>
                        </button>
                        <button class="btn btn-secondary tool-btn" data-tool="calculator" style="flex-direction: column; height: 100px;">
                            <i class="fas fa-calculator" style="font-size: 2rem;"></i>
                            <span>Calculadora</span>
                        </button>
                    </div>
                </div>

                <!-- üîó VINCULACI√ìN CON ATACAMAPP -->
                <div class="card" style="background: linear-gradient(135deg, #F3E8FF, #E9D5FF);">
                    <h3 class="card-title">
                        <i class="fas fa-link"></i>
                        Conectado con AtacamApp
                    </h3>
                    
                    <p style="margin-bottom: 20px; color: #6B21A8;">
                        <i class="fas fa-plug"></i> Vinculado con el sistema principal
                    </p>
                    
                    <button class="btn btn-primary" onclick="window.open('https://siulerbor.github.io/AtacamApp/', '_blank')" style="width: 100%;">
                        <i class="fas fa-external-link-alt"></i> Abrir AtacamApp Completo
                    </button>
                </div>
            </div>
        </main>

        <!-- üì± NAVEGACI√ìN INFERIOR -->
        <nav class="bottom-nav">
            <a href="#" class="nav-btn active" data-page="dashboard">
                <i class="fas fa-home"></i>
                <span class="nav-label">Inicio</span>
            </a>
            <a href="#" class="nav-btn" data-page="camera">
                <i class="fas fa-camera"></i>
                <span class="nav-label">An√°lisis</span>
            </a>
            <a href="#" class="nav-btn" data-page="map">
                <i class="fas fa-map"></i>
                <span class="nav-label">Mapa</span>
            </a>
            <a href="#" class="nav-btn" data-page="ai">
                <i class="fas fa-robot"></i>
                <span class="nav-label">IA</span>
            </a>
            <a href="#" class="nav-btn" data-page="data">
                <i class="fas fa-database"></i>
                <span class="nav-label">Datos</span>
            </a>
        </nav>

        <!-- üñºÔ∏è MODAL PARA IM√ÅGENES -->
        <div class="modal" id="imageModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 style="margin: 0; font-size: 1.3rem;">
                        <i class="fas fa-image"></i>
                        Imagen Capturada
                    </h3>
                    <button class="action-btn" id="closeModalBtn" style="background: rgba(255,255,255,0.2);">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="modal-body">
                    <img id="modalImage" src="" class="modal-image">
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <button class="btn btn-primary" id="analyzeModalBtn">
                            <i class="fas fa-robot"></i> Analizar IA
                        </button>
                        <button class="btn btn-secondary" id="savePhotoBtn">
                            <i class="fas fa-save"></i> Guardar
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- üí´ NOTIFICACIONES -->
    <div class="notification" id="notification" style="display: none;">
        <i class="fas fa-info-circle notification-icon"></i>
        <span id="notificationText">Mensaje de notificaci√≥n</span>
    </div>

    <!-- üìö SCRIPTS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // üéâ VARIABLES GLOBALES CON EMOJIS
        const CONFIG = {
            APP_NAME: "AtacamApp",
            VERSION: "2.0 ‚ú®",
            COLORS: {
                primary: "#6D28D9",
                secondary: "#10B981",
                accent: "#F59E0B"
            }
        };

        let map = null;
        let mapMarkers = [];
        let currentLocation = null;
        let cameraStream = null;
        let currentCamera = 'environment';
        let capturedPhotos = [];
        let currentPhoto = null;
        let isCameraActive = false;

        // üöÄ INICIALIZACI√ìN DE LA APP
        document.addEventListener('DOMContentLoaded', () => {
            console.log("üöÄ AtacamApp iniciando...");
            simulateLoading();
            setupNavigation();
            initMap();
            setupEventListeners();
            checkPermissions();
            setupPWA();
        });

        // üìä SIMULAR CARGA
        function simulateLoading() {
            let progress = 0;
            const progressBar = document.getElementById('progressBar');
            const interval = setInterval(() => {
                progress += Math.random() * 20;
                if (progress > 100) {
                    progress = 100;
                    clearInterval(interval);
                    
                    setTimeout(() => {
                        document.getElementById('splashScreen').style.opacity = '0';
                        setTimeout(() => {
                            document.getElementById('splashScreen').style.display = 'none';
                            document.getElementById('appContainer').style.display = 'block';
                            showNotification('üéâ AtacamApp cargada correctamente', 'success');
                        }, 500);
                    }, 300);
                }
                progressBar.style.width = progress + '%';
            }, 200);
        }

        // üß≠ CONFIGURAR NAVEGACI√ìN
        function setupNavigation() {
            // Navegaci√≥n superior
            document.querySelectorAll('.nav-item').forEach(btn => {
                btn.addEventListener('click', () => {
                    const pageId = btn.dataset.page;
                    switchPage(pageId);
                    
                    document.querySelectorAll('.nav-item').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    
                    document.querySelectorAll('.nav-btn').forEach(icon => {
                        icon.classList.remove('active');
                        if (icon.dataset.page === pageId) {
                            icon.classList.add('active');
                        }
                    });
                });
            });

            // Navegaci√≥n inferior
            document.querySelectorAll('.nav-btn').forEach(icon => {
                icon.addEventListener('click', (e) => {
                    e.preventDefault();
                    const pageId = icon.dataset.page;
                    switchPage(pageId);
                    
                    document.querySelectorAll('.nav-btn').forEach(i => i.classList.remove('active'));
                    icon.classList.add('active');
                    
                    document.querySelectorAll('.nav-item').forEach(btn => {
                        btn.classList.remove('active');
                        if (btn.dataset.page === pageId) {
                            btn.classList.add('active');
                        }
                    });
                });
            });
        }

        // üîÑ CAMBIAR P√ÅGINA
        function switchPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            const targetPage = document.getElementById('page' + pageId.charAt(0).toUpperCase() + pageId.slice(1));
            if (targetPage) {
                targetPage.classList.add('active');
                targetPage.classList.add('fade-in');
                
                setTimeout(() => {
                    targetPage.classList.remove('fade-in');
                }, 500);
            }
            
            switch(pageId) {
                case 'camera':
                    if (!isCameraActive) {
                        showNotification('üì∏ Presiona el bot√≥n de c√°mara para activar', 'info');
                    }
                    break;
                case 'map':
                    if (map && currentLocation) {
                        map.setView([currentLocation.latitude, currentLocation.longitude], 13);
                    }
                    break;
            }
        }

        // üéÆ CONFIGURAR EVENTOS
        function setupEventListeners() {
            // GPS
            document.getElementById('getLocationBtn').addEventListener('click', getGPSLocation);
            document.getElementById('gpsBtn').addEventListener('click', getGPSLocation);
            
            // C√°mara
            document.getElementById('cameraToggle').addEventListener('click', toggleCamera);
            document.getElementById('switchCameraBtn').addEventListener('click', switchCamera);
            document.getElementById('captureBtn').addEventListener('click', capturePhoto);
            document.getElementById('uploadPhotoBtn').addEventListener('click', uploadPhoto);
            document.getElementById('stopCameraBtn').addEventListener('click', stopCamera);
            document.getElementById('savePhotoBtn').addEventListener('click', savePhoto);
            
            // Mapa
            document.getElementById('centerMapBtn').addEventListener('click', centerMap);
            document.getElementById('addMarkerBtn').addEventListener('click', addMapMarker);
            
            // IA
            document.getElementById('analyzePhotoBtn').addEventListener('click', analyzeWithAI);
            document.getElementById('analyzeModalBtn').addEventListener('click', analyzeWithAI);
            
            // Datos
            document.getElementById('exportJSONBtn').addEventListener('click', exportJSON);
            document.getElementById('exportCSVBtn').addEventListener('click', exportCSV);
            document.getElementById('exportPDFBtn').addEventListener('click', exportPDF);
            document.getElementById('clearDataBtn').addEventListener('click', clearData);
            document.getElementById('searchData').addEventListener('input', searchData);
            
            // Herramientas
            document.querySelectorAll('.tool-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    openTool(this.dataset.tool);
                });
            });
            
            // Modal
            document.getElementById('closeModalBtn').addEventListener('click', () => {
                document.getElementById('imageModal').class.classList.remove('active');
            });
            
            // Ajustes
            document.getElementById('settingsBtn').addEventListener('click', openSettings);
        }

        // üõ∞Ô∏è OBTENER UBICACI√ìN GPS
        function getGPSLocation() {
            if (!navigator.geolocation) {
                showNotification('‚ùå GPS no soportado en este dispositivo', 'error');
                return;
            }
            
            showNotification('üõ∞Ô∏è Obteniendo ubicaci√≥n GPS...', 'info');
            updateStatus('gpsStatus', 'üîÑ');
            
            navigator.geolocation.getCurrentPosition(
                (position) => {
                    currentLocation = {
                        latitude: position.coords.latitude,
                        longitude: position.coords.longitude,
                        altitude: position.coords.altitude || 0,
                        accuracy: position.coords.accuracy,
                        heading: position.coords.heading || 0,
                        speed: position.coords.speed || 0,
                        timestamp: new Date(position.timestamp)
                    };
                    
                    updateLocationDisplay();
                    updateMapLocation();
                    updateGeologicalZone();
                    
                    showNotification(`üìç Ubicaci√≥n obtenida (${currentLocation.accuracy.toFixed(0)}m precisi√≥n)`, 'success');
                    updateStatus('gpsStatus', '‚úÖ');
                    
                    // Simular actualizaci√≥n de par√°metros
                    simulateStructuralUpdate();
                },
                (error) => {
                    console.error('GPS Error:', error);
                    let message = '‚ùå Error GPS: ';
                    
                    switch(error.code) {
                        case 1: message += 'Permiso denegado'; break;
                        case 2: message += 'Posici√≥n no disponible'; break;
                        case 3: message += 'Timeout'; break;
                        default: message += 'Error desconocido';
                    }
                    
                    showNotification(message, 'error');
                    updateStatus('gpsStatus', '‚ùå');
                    
                    useSimulatedLocation();
                },
                {
                    enableHighAccuracy: true,
                    timeout: 10000,
                    maximumAge: 0
                }
            );
        }

        // üó∫Ô∏è ACTUALIZAR UBICACI√ìN EN PANTALLA
        function updateLocationDisplay() {
            if (!currentLocation) return;
            
            document.getElementById('latitudeValue').textContent = currentLocation.latitude.toFixed(4);
            document.getElementById('longitudeValue').textContent = currentLocation.longitude.toFixed(4);
            document.getElementById('altitudeValue').textContent = 
                currentLocation.altitude ? currentLocation.altitude.toFixed(0) + ' m' : '--';
            document.getElementById('accuracyValue').textContent = '¬±' + currentLocation.accuracy.toFixed(0) + ' m';
            
            updateStatus('locationStatus', 'üìç');
        }

        // üèîÔ∏è ACTUALIZAR ZONA GEOL√ìGICA
        function updateGeologicalZone() {
            if (!currentLocation) return;
            
            const zones = [
                { name: 'üèîÔ∏è Cordillera de los Andes', emoji: 'üèîÔ∏è' },
                { name: 'üåÑ Precordillera', emoji: 'üåÑ' },
                { name: 'üèúÔ∏è Depresi√≥n Intermedia', emoji: 'üèúÔ∏è' },
                { name: 'üåä Costa', emoji: 'üåä' }
            ];
            
            const randomZone = zones[Math.floor(Math.random() * zones.length)];
            document.getElementById('locationStatus').textContent = randomZone.emoji;
        }

        // üîÑ SIMULAR ACTUALIZACI√ìN DE PAR√ÅMETROS
        function simulateStructuralUpdate() {
            const rumbos = ['N.45¬∞E', 'N.30¬∞E', 'N.60¬∞E', 'N.15¬∞W'];
            const buzamientos = ['30¬∞SE', '45¬∞NW', '25¬∞SW', '60¬∞NE'];
            
            document.getElementById('rumboValue').textContent = rumbos[Math.floor(Math.random() * rumbos.length)];
            document.getElementById('buzamientoValue').textContent = buzamientos[Math.floor(Math.random() * buzamientos.length)];
            
            document.getElementById('rumboValue').classList.add('pulse');
            document.getElementById('buzamientoValue').classList.add('pulse');
            
            setTimeout(() => {
                document.getElementById('rumboValue').classList.remove('pulse');
                document.getElementById('buzamientoValue').classList.remove('pulse');
            }, 1000);
        }

        // üéÆ USAR UBICACI√ìN SIMULADA
        function useSimulatedLocation() {
            currentLocation = {
                latitude: -27.3667 + (Math.random() - 0.5) * 0.1,
                longitude: -70.3333 + (Math.random() - 0.5) * 0.1,
                altitude: 1200 + Math.random() * 1000,
                accuracy: 5 + Math.random() * 10,
                heading: 0,
                speed: 0,
                timestamp: new Date()
            };
            
            updateLocationDisplay();
            updateMapLocation();
            updateGeologicalZone();
            
            showNotification('üéÆ Usando ubicaci√≥n simulada (modo demo)', 'warning');
            updateStatus('gpsStatus', 'üéÆ');
        }

        // üó∫Ô∏è INICIALIZAR MAPA
        function initMap() {
            const defaultCoords = [-27.3667, -70.3333];
            
            map = L.map('map').setView(defaultCoords, 10);
            
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '¬© OpenStreetMap',
                maxZoom: 18
            }).addTo(map);
            
            const marker = L.marker(defaultCoords, {
                icon: L.divIcon({
                    className: 'custom-marker',
                    html: '<div style="background: var(--primary); color: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 3px solid white; box-shadow: 0 0 20px rgba(109, 40, 217, 0.5);"><i class="fas fa-map-marker-alt"></i></div>',
                    iconSize: [40, 40],
                    iconAnchor: [20, 40]
                })
            }).addTo(map);
            
            mapMarkers.push(marker);
            addGeologicalLayers();
            
            showNotification('üó∫Ô∏è Mapa cargado correctamente', 'success');
        }

        // üìç ACTUALIZAR UBICACI√ìN EN MAPA
        function updateMapLocation() {
            if (!map || !currentLocation) return;
            
            const latLng = [currentLocation.latitude, currentLocation.longitude];
            map.setView(latLng, 13);
            
            if (mapMarkers.length > 0) {
                mapMarkers[0].setLatLng(latLng);
            }
            
            L.circle(latLng, {
                color: CONFIG.COLORS.primary,
                fillColor: CONFIG.COLORS.primary,
                fillOpacity: 0.2,
                radius: currentLocation.accuracy
            }).addTo(map);
        }

        // üéØ CENTRAR MAPA
        function centerMap() {
            if (!currentLocation) {
                showNotification('üìç Obt√©n tu ubicaci√≥n primero', 'warning');
                return;
            }
            
            map.setView([currentLocation.latitude, currentLocation.longitude], 13);
            showNotification('üéØ Mapa centrado en tu ubicaci√≥n', 'info');
        }

        // üìå A√ëADIR MARCADOR
        function addMapMarker() {
            if (!currentLocation) {
                showNotification('üìç Necesitas una ubicaci√≥n primero', 'warning');
                return;
            }
            
            const marker = L.marker([currentLocation.latitude, currentLocation.longitude], {
                icon: L.divIcon({
                    className: 'sample-marker',
                    html: '<div style="background: var(--accent); color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 2px solid white; box-shadow: 0 0 15px rgba(245, 158, 11, 0.5);"><i class="fas fa-gem"></i></div>',
                    iconSize: [30, 30],
                    iconAnchor: [15, 30]
                })
            }).addTo(map);
            
            marker.bindPopup(`
                <div style="padding: 10px;">
                    <strong>üìç Punto de Muestra</strong><br>
                    <small>${new Date().toLocaleString()}</small><br>
                    <i class="fas fa-map-pin"></i> ${currentLocation.latitude.toFixed(4)}, ${currentLocation.longitude.toFixed(4)}
                </div>
            `);
            
            mapMarkers.push(marker);
            showNotification('üìå Marcador a√±adido al mapa', 'success');
        }

        // üé® A√ëADIR CAPAS GEOL√ìGICAS
        function addGeologicalLayers() {
            const geologyLayer = L.layerGroup();
            const faultLayer = L.layerGroup();
            const mineralLayer = L.layerGroup();
            
            for (let i = 0; i < 15; i++) {
                const lat = -27.3667 + (Math.random() - 0.5) * 1.5;
                const lng = -70.3333 + (Math.random() - 0.5) * 1.5;
                
                L.circleMarker([lat, lng], {
                    color: CONFIG.COLORS.rock,
                    fillColor: CONFIG.COLORS.rock,
                    radius: 6,
                    fillOpacity: 0.7
                }).addTo(geologyLayer);
                
                if (i % 3 === 0) {
                    const lat2 = lat + Math.random() * 0.1;
                    const lng2 = lng + Math.random() * 0.1;
                    L.polyline([[lat, lng], [lat2, lng2]], {
                        color: CONFIG.COLORS.mineral,
                        weight: 3,
                        opacity: 0.7
                    }).addTo(faultLayer);
                }
                
                if (i % 4 === 0) {
                    L.circle([lat + 0.05, lng + 0.05], {
                        color: CONFIG.COLORS.accent,
                        fillColor: CONFIG.COLORS.accent,
                        fillOpacity: 0.3,
                        radius: 300
                    }).addTo(mineralLayer);
                }
            }
            
            geologyLayer.addTo(map);
            faultLayer.addTo(map);
            
            document.querySelectorAll('#mapLayers input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const layer = this.dataset.layer;
                    switch(layer) {
                        case 'geology':
                            map.hasLayer(geologyLayer) ? map.removeLayer(geologyLayer) : map.addLayer(geologyLayer);
                            break;
                        case 'faults':
                            map.hasLayer(faultLayer) ? map.removeLayer(faultLayer) : map.addLayer(faultLayer);
                            break;
                        case 'mineralization':
                            map.hasLayer(mineralLayer) ? map.removeLayer(mineralLayer) : map.addLayer(mineralLayer);
                            break;
                    }
                });
            });
        }

        // üì∏ TOGGLE C√ÅMARA
        async function toggleCamera() {
            if (cameraStream) {
                stopCamera();
            } else {
                await startCamera();
            }
        }

        // üé• INICIAR C√ÅMARA
        async function startCamera() {
            try {
                const constraints = {
                    video: {
                        facingMode: currentCamera,
                        width: { ideal: 1280 },
                        height: { ideal: 720 }
                    },
                    audio: false
                };
                
                cameraStream = await navigator.mediaDevices.getUserMedia(constraints);
                const video = document.getElementById('cameraFeed');
                video.srcObject = cameraStream;
                
                await new Promise(resolve => {
                    video.onloadedmetadata = () => {
                        video.play();
                        resolve();
                    };
                });
                
                document.getElementById('captureBtn').disabled = false;
                document.getElementById('stopCameraBtn').disabled = false;
                document.getElementById('analyzePhotoBtn').disabled = false;
                
                updateStatus('cameraStatus', 'üì∏');
                document.getElementById('cameraStatusText').innerHTML = 
                    '<i class="fas fa-circle" style="color:#00FF00;"></i> EN VIVO';
                
                isCameraActive = true;
                showNotification('üé• C√°mara activada', 'success');
                
            } catch (error) {
                console.error('Error c√°mara:', error);
                showNotification('‚ùå Error al activar c√°mara', 'error');
                updateStatus('cameraStatus', '‚ùå');
            }
        }

        // ‚èπÔ∏è DETENER C√ÅMARA
        function stopCamera() {
            if (cameraStream) {
                cameraStream.getTracks().forEach(track => track.stop());
                cameraStream = null;
            }
            
            const video = document.getElementById('cameraFeed');
            video.srcObject = null;
            
            document.getElementById('captureBtn').disabled = true;
            document.getElementById('stopCameraBtn').disabled = true;
            
            updateStatus('cameraStatus', 'üì¥');
            document.getElementById('cameraStatusText').innerHTML = 
                '<i class="fas fa-circle" style="color:#FF4444;"></i> INACTIVA';
            
            isCameraActive = false;
            showNotification('‚èπÔ∏è C√°mara detenida', 'info');
        }

        // üîÑ CAMBIAR C√ÅMARA
        function switchCamera() {
            if (!cameraStream) return;
            
            currentCamera = currentCamera === 'environment' ? 'user' : 'environment';
            stopCamera();
            startCamera();
            showNotification(`üîÑ Cambiando a c√°mara ${currentCamera === 'environment' ? 'trasera' : 'frontal'}`, 'info');
        }

        // üì∑ CAPTURAR FOTO
        function capturePhoto() {
            if (!cameraStream) {
                showNotification('üì∏ Activa la c√°mara primero', 'warning');
                return;
            }
            
            const video = document.getElementById('cameraFeed');
            const canvas = document.getElementById('photoCanvas');
            const context = canvas.getContext('2d');
            
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            context.drawImage(video, 0, 0, canvas.width, canvas.height);
            
            const imageData = canvas.toDataURL('image/jpeg');
            currentPhoto = {
                data: imageData,
                timestamp: new Date().toISOString(),
                location: currentLocation,
                analysis: null
            };
            
            capturedPhotos.push(currentPhoto);
            updatePhotoHistory();
            
            document.getElementById('modalImage').src = imageData;
            document.getElementById('imageModal').classList.add('active');
            
            showNotification('üì∑ Foto capturada correctamente', 'success');
        }

        // ‚òÅÔ∏è SUBIR FOTO
        function uploadPhoto() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            input.onchange = (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        currentPhoto = {
                            data: event.target.result,
                            timestamp: new Date().toISOString(),
                            location: currentLocation,
                            analysis: null,
                            source: 'upload'
                        };
                        
                        capturedPhotos.push(currentPhoto);
                        updatePhotoHistory();
                        
                        document.getElementById('modalImage').src = event.target.result;
                        document.getElementById('imageModal').classList.add('active');
                        
                        showNotification('‚òÅÔ∏è Imagen cargada correctamente', 'success');
                        document.getElementById('analyzePhotoBtn').disabled = false;
                    };
                    reader.readAsDataURL(file);
                }
            };
            input.click();
        }

        // üíæ GUARDAR FOTO
        function savePhoto() {
            if (!currentPhoto) return;
            
            showNotification('üíæ Imagen guardada en galer√≠a', 'success');
            document.getElementById('imageModal').classList.remove('active');
        }

        // üì∏ ACTUALIZAR HISTORIAL DE FOTOS
        function updatePhotoHistory() {
            const container = document.getElementById('photoHistory');
            if (capturedPhotos.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 30px;">
                        <i class="fas fa-images" style="font-size: 3rem; color: #CBD5E1; margin-bottom: 15px;"></i>
                        <p style="color: #64748B;">Captura im√°genes para comenzar el an√°lisis</p>
                    </div>
                `;
                return;
            }
            
            let html = '<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">';
            capturedPhotos.slice(-6).reverse().forEach((photo, index) => {
                html += `
                    <div style="position: relative; cursor: pointer; border-radius: 10px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.1);" onclick="viewPhoto(${capturedPhotos.length - 1 - index})">
                        <img src="${photo.data}" style="width: 100%; height: 100px; object-fit: cover;">
                        <div style="position: absolute; bottom: 5px; right: 5px; background: rgba(0,0,0,0.7); color: white; padding: 2px 5px; border-radius: 3px; font-size: 0.7rem;">
                            ${new Date(photo.timestamp).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}
                        </div>
                    </div>
                `;
            });
            html += '</div>';
            container.innerHTML = html;
        }

        // üëÅÔ∏è VER FOTO
        function viewPhoto(index) {
            if (capturedPhotos[index]) {
                currentPhoto = capturedPhotos[index];
                document.getElementById('modalImage').src = currentPhoto.data;
                document.getElementById('imageModal').classList.add('active');
            }
        }

        // ü§ñ ANALIZAR CON IA
        async function analyzeWithAI() {
            if (!currentPhoto) {
                showNotification('üì∏ Captura o sube una imagen primero', 'warning');
                return;
            }
            
            showNotification('ü§ñ Analizando con IA geol√≥gica...', 'info');
            updateStatus('aiStatus', 'üîÑ');
            
            // Simulaci√≥n de an√°lisis IA
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            const rockTypes = ['ü™® Roca sedimentaria carbonatada', 'üíé Esquisto', 'üèîÔ∏è Granito', 'üåã Basalto', 'üèúÔ∏è Arenisca'];
            const structures = ['‚ö° Falla principal', 'üîÑ Pliegue sinclinal', 'üìê Discordancia angular', '‚ú® Foliaci√≥n', 'üìä Estratificaci√≥n'];
            const minerals = ['üî∏ Calcita', 'üîπ Cuarzo', 'üî∫ Feldespato', 'üîª Mica', '‚≠ï Hematita'];
            
            const randomRock = rockTypes[Math.floor(Math.random() * rockTypes.length)];
            const randomStructure = structures[Math.floor(Math.random() * structures.length)];
            const randomMineral = minerals[Math.floor(Math.random() * minerals.length)];
            const confidence = (85 + Math.random() * 10).toFixed(1);
            
            document.getElementById('detectedRockType').textContent = randomRock;
            document.getElementById('detectedStructure').textContent = randomStructure;
            document.getElementById('detectedRumbo').textContent = `N.${Math.floor(Math.random() * 90)}¬∞E`;
            document.getElementById('detectedBuzamiento').textContent = `${Math.floor(Math.random() * 60)}¬∞${['SE', 'NW', 'SW', 'NE'][Math.floor(Math.random() * 4)]}`;
            
            const report = `
                <div class="ai-confidence">üéØ ${confidence}% Confianza</div>
                <strong>üß† Resultados del An√°lisis IA:</strong><br><br>
                <strong>Tipo de roca identificada:</strong> ${randomRock}<br>
                <strong>Estructura principal:</strong> ${randomStructure}<br>
                <strong>Minerales detectados:</strong> ${randomMineral}, ${minerals[Math.floor(Math.random() * minerals.length)]}<br>
                <strong>Par√°metros estructurales:</strong><br>
                &nbsp;&nbsp;- Rumbo: ${document.getElementById('detectedRumbo').textContent}<br>
                &nbsp;&nbsp;- Buzamiento: ${document.getElementById('detectedBuzamiento').textContent}<br><br>
                <em>An√°lisis generado por IA especializada en geolog√≠a estructural.</em>
            `;
            
            document.getElementById('aiResultText').innerHTML = report;
            document.getElementById('confidenceScore').textContent = `${confidence}%`;
            
            currentPhoto.analysis = {
                rockType: randomRock,
                structure: randomStructure,
                minerals: [randomMineral],
                confidence: confidence,
                timestamp: new Date().toISOString()
            };
            
            showNotification(`ü§ñ An√°lisis completado (${confidence}% confianza)`, 'success');
            updateStatus('aiStatus', '‚úÖ');
            
            document.getElementById('imageModal').classList.remove('active');
        }

        // üì§ EXPORTAR JSON
        function exportJSON() {
            const data = {
                app: "AtacamApp",
                version: "2.0",
                photos: capturedPhotos,
                location: currentLocation,
                exported: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            downloadFile(blob, `atacamapp_data_${new Date().toISOString().slice(0,10)}.json`);
            showNotification('üì• Datos exportados como JSON', 'success');
        }

        // üìä EXPORTAR CSV
        function exportCSV() {
            let csv = "Fecha,Hora,Latitud,Longitud,Tipo_Roca,Confianza\n";
            capturedPhotos.forEach(photo => {
                if (photo.analysis) {
                    const date = new Date(photo.timestamp);
                    csv += `"${date.toLocaleDateString()}","${date.toLocaleTimeString()}","${photo.location?.latitude || ''}","${photo.location?.longitude || ''}","${photo.analysis.rockType}","${photo.analysis.confidence}"\n`;
                }
            });
            
            const blob = new Blob([csv], { type: 'text/csv' });
            downloadFile(blob, `atacamapp_data_${new Date().toISOString().slice(0,10)}.csv`);
            showNotification('üìä Datos exportados como CSV', 'success');
        }

        // üìÑ EXPORTAR PDF
        function exportPDF() {
            showNotification('üìÑ Generando PDF...', 'info');
            setTimeout(() => {
                showNotification('üìÑ PDF generado (simulaci√≥n)', 'success');
            }, 1500);
        }

        // üóëÔ∏è LIMPIAR DATOS
        function clearData() {
            if (confirm('‚ö†Ô∏è ¬øEst√°s seguro de borrar todos los datos? Esta acci√≥n no se puede deshacer.')) {
                capturedPhotos = [];
                currentPhoto = null;
                updatePhotoHistory();
                document.getElementById('dataList').innerHTML = '';
                showNotification('üóëÔ∏è Todos los datos han sido borrados', 'success');
            }
        }

        // üîç BUSCAR DATOS
        function searchData() {
            const searchTerm = document.getElementById('searchData').value.toLowerCase();
            // Implementaci√≥n de b√∫squeda
        }

        // üõ†Ô∏è ABRIR HERRAMIENTA
        function openTool(tool) {
            switch(tool) {
                case 'compass':
                    showNotification('üß≠ Br√∫jula digital activada', 'info');
                    break;
                case 'mohs':
                    showNotification('üíé Escala de Mohs cargada', 'info');
                    break;
                case 'converter':
                    showNotification('‚öñÔ∏è Conversor de unidades listo', 'info');
                    break;
                case 'calculator':
                    showNotification('üßÆ Calculadora geol√≥gica activa', 'info');
                    break;
            }
        }

        // ‚öôÔ∏è ABRIR AJUSTES
        function openSettings() {
            showNotification('‚öôÔ∏è Configuraci√≥n (en desarrollo)', 'info');
        }

        // üì• DESCARGAR ARCHIVO
        function downloadFile(blob, filename) {
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // üîç VERIFICAR PERMISOS
        function checkPermissions() {
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            
            if (isMobile) {
                console.log("üì± AtacamApp - Modo m√≥vil detectado");
            }
            
            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                showNotification('üì∏ La c√°mara no est√° disponible', 'warning');
            }
            
            if (!navigator.geolocation) {
                showNotification('üõ∞Ô∏è El GPS no est√° disponible', 'warning');
            }
        }

        // üì± CONFIGURAR PWA
        function setupPWA() {
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', () => {
                    navigator.serviceWorker.register('/sw.js').catch(err => {
                        console.log('ServiceWorker failed: ', err);
                    });
                });
            }
            
            if (window.matchMedia('(display-mode: standalone)').matches) {
                console.log("üì± AtacamApp ejecut√°ndose como PWA");
            }
        }

        // üí¨ MOSTRAR NOTIFICACI√ìN
        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notificationText');
            
            let icon = 'info-circle';
            
            switch(type) {
                case 'success':
                    icon = 'check-circle';
                    notification.className = 'notification success';
                    break;
                case 'error':
                    icon = 'exclamation-circle';
                    notification.className = 'notification error';
                    break;
                case 'warning':
                    icon = 'exclamation-triangle';
                    notification.className = 'notification warning';
                    break;
                default:
                    notification.className = 'notification';
            }
            
            notification.innerHTML = `<i class="fas fa-${icon} notification-icon"></i> <span id="notificationText">${message}</span>`;
            notification.style.display = 'flex';
            
            setTimeout(() => {
                notification.classList.add('hiding');
                setTimeout(() => {
                    notification.style.display = 'none';
                    notification.classList.remove('hiding');
                }, 300);
            }, 3000);
        }

        // üìä ACTUALIZAR ESTADO
        function updateStatus(elementId, content) {
            const element = document.getElementById(elementId);
            if (element) {
                element.innerHTML = content;
            }
        }

        // üöÄ INICIALIZAR AL CARGAR
        window.addEventListener('load', () => {
            console.log("üéâ AtacamApp 100% funcional - Interfaz mejorada con colores vibrantes ‚ú®");
            console.log("üöÄ Versi√≥n: 2.0 | Plataforma: WebApp Universal");
        });
    </script>
</body>
</html>
